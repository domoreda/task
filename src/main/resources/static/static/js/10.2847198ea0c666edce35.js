webpackJsonp([10],{"+GIy":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("tvc8"),r=i("PWqD"),a=i("VU/8"),n=a(o.a,r.a,null,null,null);e.default=n.exports},PWqD:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{placeholder:"产品大类"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.query(e)}},model:{value:t.searchForm.bigProductNo,callback:function(e){t.$set(t.searchForm,"bigProductNo",e)},expression:"searchForm.bigProductNo"}})],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-button",{attrs:{loading:t.loading,icon:"el-icon-search"},on:{click:t.query}},[t._v("搜索")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.openCreateForm}},[t._v("添加")])],1)],1),t._v(" "),i("el-table",{attrs:{data:t.bigProducts,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"380",type:"index"}}),t._v(" "),i("el-table-column",{attrs:{label:"产品名称","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.bigProductName)+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"380",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){t.openUpdateForm(e.row)}}},[i("i",{staticClass:"el-icon-edit"})]),t._v(" "),i("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(i){t.confirmDelete(e.row)}}},[i("i",{staticClass:"el-icon-delete"})])]}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"bigProductForm",staticClass:"small-space",staticStyle:{"margin-left":"30px","margin-right":"50px"},attrs:{model:t.formData,"label-position":"right","label-width":"140px"}},[i("el-form-item",{attrs:{label:"产品大类",prop:"bigProductName",rules:[{required:!0,message:"产品大类不能为空"}]}},[i("el-input",{model:{value:t.formData.bigProductName,callback:function(e){t.$set(t.formData,"bigProductName",e)},expression:"formData.bigProductName"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.create}},[t._v("确定")]):i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.update}},[t._v("确定")])],1)],1)],1)},r=[],a={render:o,staticRenderFns:r};e.a=a},tvc8:function(t,e,i){"use strict";var o=i("Dd8w"),r=i.n(o),a=i("NYxO"),n=i("0xDb");e.a={data:function(){return{loading:!1,dialogFormVisible:!1,dialogStatus:"",searchForm:{page:0,size:12,sort:"id,asc"},textMap:{update:"编辑",create:"创建"},formData:{id:0,bigProductName:""}}},computed:r()({},i.i(a.b)(["bigProducts","menus"])),mounted:function(){this.query()},methods:r()({},i.i(a.c)(["createBigProduct","updateBigProduct","deleteBigProduct","queryAllProducts","queryAllBigProducts"]),{query:function(){var t=this;this.loading=!0,this.queryAllBigProducts(this.searchForm).then(function(){return t.queryAllProducts({projection:"bigProduct"})}).then(function(){t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},openCreateForm:function(){this.formData={id:0,bigProductName:""},this.dialogStatus="create",this.dialogFormVisible=!0},openUpdateForm:function(t){this.formData=i.i(n.e)(t),this.dialogStatus="update",this.dialogFormVisible=!0},create:function(){var t=this;this.loading=!0,this.$refs.bigProductForm.validate(function(e){e?t.createBigProduct(t.formData).then(function(){i.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){i.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1}):(i.i(n.d)("检查所填字段",{type:"warning"}),t.loading=!1)})},confirmDelete:function(t){for(var e=this,o=this.menus,r=0;r<o.length;r++){var a=o[r];if(a.bigProductName===t.bigProductName&&a.children.length>0)return void this.$alert("该产品大类中包含产品信息，请先删除该产品大类下的产品信息。","提示",{confirmButtonText:"确定"})}this.$confirm("此操作将永久删除此数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){e.deleteBigProduct(t).then(function(){i.i(n.d)(),e.query()}).catch(function(t){i.i(n.d)("删除失败!",{type:"error"})})}).catch(function(){i.i(n.d)("已取消删除操作!",{type:"info"})})},update:function(){var t=this;this.loading=!0,this.updateBigProduct(this.formData).then(function(){i.i(n.d)(),t.loading=!1,t.dialogFormVisible=!1,t.query()}).catch(function(e){i.i(n.d)("",{type:"error"}),t.loading=!1,t.dialogFormVisible=!1})}})}}});